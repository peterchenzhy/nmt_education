<page-header [title]="pageHeader"></page-header>
<form nz-form [formGroup]="form" (ngSubmit)="_submitForm()" [nzLayout]="'vertical'">
    <nz-card [nzBordered]="false" nzTitle="教师信息">
        <nz-row nzGutter="16">
            <nz-col nzLg="6" nzMd="12" nzSm="24">
                <nz-form-item>
                    <nz-form-label nzFor="name">教师姓名</nz-form-label>
                    <nz-form-control nzErrorTip="请输入教师姓名">
                        <input nz-input formControlName="name" id="name" placeholder="请输入教师姓名" />
                    </nz-form-control>
                </nz-form-item>
            </nz-col>
            <nz-col [nzXl]="{ span: 6, offset: 2 }" [nzLg]="{ span: 8 }" [nzMd]="{ span: 12 }" nzSm="24">
                <nz-form-item>
                    <nz-form-label>性别</nz-form-label>
                    <nz-radio-group formControlName="gender">
                        <label nz-radio [nzValue]="1">男</label>
                        <label nz-radio [nzValue]="0">女</label>
                    </nz-radio-group>
                </nz-form-item>
            </nz-col>
            <nz-col [nzXl]="{ span: 8, offset: 2 }" [nzLg]="{ span: 10 }" [nzMd]="{ span: 24 }" nzSm="24">
                <nz-form-item>
                    <nz-form-label>联系方式</nz-form-label>
                    <nz-form-control>
                        <input nz-input formControlName="phone" id="phone" />
                    </nz-form-control>
                </nz-form-item>
            </nz-col>
        </nz-row>
        <nz-row nzGutter="16">
            <nz-col nzLg="12" nzMd="24" nzSm="24">
                <nz-form-item>
                    <nz-form-label nzFor="introduction">介绍</nz-form-label>
                    <nz-form-control nzErrorTip="请输入教师介绍">
                        <textarea nz-input formControlName="introduction" [nzAutosize]="{ minRows: 4 }"
                            placeholder="请输入教师介绍"></textarea>
                    </nz-form-control>
                </nz-form-item>
            </nz-col>
        </nz-row>
    </nz-card>
    <nz-card [nzBordered]="false" nzTitle="薪资配置">
        <nz-table formArrayName="salayConfig" [nzData]="salayConfig.value" [nzShowPagination]="false">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>年级</th>
                    <th>科目</th>
                    <th>课程类型</th>
                    <th>薪资</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of salayConfig.controls; let i = index" [formGroupName]="i">
                    <td>
                        <span>{{ salayConfig.value[i].id }}</span>
                    </td>
                    <td>
                        <span *ngIf="editIndex !== i">{{ getGradeLabel(salayConfig.value[i].grade) }}</span>
                        <span *ngIf="editIndex === i" nz-form-control nzErrorTip="请选择年级">
                            <nz-select formControlName="grade" [nzPlaceHolder]="'请选择年级'" [nzShowSearch]="true">
                                <nz-option *ngFor="let i of gradeList" [nzLabel]="i.label" [nzValue]="i.value">
                                </nz-option>
                            </nz-select>
                        </span>
                    </td>
                    <td>
                        <span *ngIf="editIndex !== i">{{ getCourseSubjectLabel(salayConfig.value[i].courseSubject) }}</span>
                        <span *ngIf="editIndex === i" nz-form-control nzErrorTip="请选择年级">
                            <nz-select formControlName="courseSubject" [nzPlaceHolder]="'请选择课程状态'" [nzShowSearch]="true">
                                <nz-option *ngFor="let i of courseSubjectList" [nzLabel]="i.label" [nzValue]="i.value">
                                </nz-option>
                            </nz-select>
                        </span>
                    </td>
                    <td>
                        <span *ngIf="editIndex !== i">{{ getCourseTypeLabel(salayConfig.value[i].courseType) }}</span>
                        <span *ngIf="editIndex === i" nz-form-control nzErrorTip="请选择课程类型">
                            <nz-select formControlName="courseType" [nzPlaceHolder]="'请选择课程类型'" [nzShowSearch]="true">
                                <nz-option *ngFor="let i of courseTypeList" [nzLabel]="i.label" [nzValue]="i.value">
                                </nz-option>
                            </nz-select>
                        </span>
                    </td>
                    <td>
                        <span *ngIf="editIndex !== i">{{ salayConfig.value[i].salary }}</span>
                        <span *ngIf="editIndex === i" nz-form-control nzErrorTip="请输入薪资">
                            <nz-input-number formControlName="salary" placeholder="请输入薪资"></nz-input-number>
                        </span>
                    </td>
                    <td>
                        <span *ngIf="editIndex !== i">
                            <a (click)="edit(i)">编辑</a>
                            <nz-divider nzType="vertical"></nz-divider>
                            <a nz-popconfirm nzPopconfirmTitle="是否要删除此行？" (nzOnConfirm)="del(i)">删除</a>
                        </span>
                        <span *ngIf="editIndex === i">
                            <a (click)="save(i)">保存</a>
                            <nz-divider nzType="vertical"></nz-divider>
                            <a nz-popconfirm nzPopconfirmTitle="是否要取消操作？" (nzOnConfirm)="cancel(i)">取消</a>
                        </span>
                    </td>
                </tr>
            </tbody>
        </nz-table>
        <button *ngIf="editIndex === -1" nz-button [nzType]="'dashed'" (click)="add()" nzBlock class="mt-md">
            <i nz-icon nzType="plus"></i>
            <span>新增薪资</span>
        </button>
    </nz-card>
    <footer-toolbar errorCollect>
        <button nz-button type="primary" nzType="primary">提交</button>
    </footer-toolbar>
</form>
<nz-card [nzBordered]="true">
    <div class="text-lg mb-md">授课列表</div>
    <st #st [data]="courses" [columns]="coursesColumns" [page]="{ show: true }">
    </st>
</nz-card>